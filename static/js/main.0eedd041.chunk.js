(this.webpackJsonprestaurant=this.webpackJsonprestaurant||[]).push([[0],{30:function(e,s,t){},37:function(e,s,t){e.exports=t(56)},45:function(e,s,t){},46:function(e,s,t){},52:function(e,s,t){},53:function(e,s,t){},54:function(e,s,t){},56:function(e,s,t){"use strict";t.r(s);var a=t(0),n=t.n(a),r=t(32),o=t.n(r),i=(t(45),t(71));t(46);class c extends n.a.Component{constructor(){super(),this.state={link:""}}componentDidMount(){const{address:e,city:s,state:t,zipCode:a,name:n}=this.props.business,r=this.constructGoogleMapsSearchUrl(e,s,t,a,n);this.setState({link:r})}constructGoogleMapsSearchUrl(e,s,t,a,n){const r="".concat(e,", ").concat(s,", ").concat(t," ").concat(a),o=encodeURIComponent("".concat(n," ").concat(r));return"https://www.google.com/maps/search/?api=1&query=".concat(o)}renderStars(){const e=this.props.business.rating,s=[],t=Math.floor(e),a=e%1!==0;for(let o=0;o<t;o++)s.push(n.a.createElement("span",{key:"full-".concat(o),className:"star full"},"\u2605"));a&&s.push(n.a.createElement("span",{key:"half",className:"star half"},"\u2605"));const r=5-Math.ceil(e);for(let o=0;o<r;o++)s.push(n.a.createElement("span",{key:"empty-".concat(o),className:"star empty"},"\u2606"));return s}render(){return n.a.createElement("div",{className:"Business"},n.a.createElement("div",{className:"image-container"},n.a.createElement("img",{src:this.props.business.imageSrc,alt:this.props.business.name})),n.a.createElement("h2",null,this.props.business.name),this.props.business.distance&&n.a.createElement("div",{className:"Business-distance"},n.a.createElement("span",{role:"img","aria-label":"location"},"\ud83d\udccd"),(621371e-9*this.props.business.distance).toFixed(1)," miles away"),null!==this.props.business.isOpenNow&&n.a.createElement("div",{className:"Business-status ".concat(this.props.business.isOpenNow?"open":"closed")},this.props.business.isOpenNow?"\ud83d\udfe2 Open Now":"\ud83d\udd34 Closed"),n.a.createElement("div",{className:"Business-information"},n.a.createElement("div",{className:"Business-reviews"},n.a.createElement("div",{className:"Business-categories"},this.props.business.categories&&this.props.business.categories.length>0?this.props.business.categories.map((e,s)=>n.a.createElement("span",{key:s,className:"category-tag"},e)):n.a.createElement("h3",null,this.props.business.category)),"N/A"!==this.props.business.price&&n.a.createElement("div",{className:"Business-price"},n.a.createElement("span",{className:"price-label"},"Price: "),n.a.createElement("span",{className:"price-value"},this.props.business.price)),n.a.createElement("div",{className:"Business-rating"},n.a.createElement("div",{className:"stars-container"},this.renderStars()),n.a.createElement("span",{className:"rating-text"},this.props.business.rating)),n.a.createElement("p",null,this.props.business.reviewCount," reviews")),n.a.createElement("div",{className:"Business-address"},n.a.createElement(i.a,{underline:"none",href:this.state.link,target:"_blank",rel:"noopener noreferrer"},n.a.createElement("div",{className:"address-header"},n.a.createElement("span",{role:"img","aria-label":"map pin"},"\ud83d\udccd"),n.a.createElement("span",{className:"address-label"},"Address")),n.a.createElement("p",null,this.props.business.address),n.a.createElement("p",null,this.props.business.city),n.a.createElement("p",null,this.props.business.state,", ",this.props.business.zipCode))),this.props.business.url&&n.a.createElement("div",{className:"Business-actions"},n.a.createElement("a",{href:this.props.business.url,target:"_blank",rel:"noopener noreferrer",className:"Business-yelp-link"},"View on Yelp \u2192"))))}}var l=c;t(52),t(30);class h extends n.a.Component{render(){return n.a.createElement("div",{className:"BusinessList"},this.props.isLoading?n.a.createElement("div",{className:"LoadingBar"}):this.props.searchPerformed?0===this.props.businesses.length?n.a.createElement("div",{className:"BusinessList-empty"},n.a.createElement("span",{className:"empty-icon",role:"img","aria-label":"No results"},"\ud83d\ude15"),n.a.createElement("p",{className:"empty-title"},"No Results Found"),n.a.createElement("p",{className:"empty-subtitle"},"Try adjusting your search or location")):this.props.businesses.map(e=>n.a.createElement(l,{business:e,key:e.id})):n.a.createElement("div",{className:"BusinessList-empty"},n.a.createElement("span",{className:"empty-icon",role:"img","aria-label":"Search"},"\ud83d\udd0d"),n.a.createElement("p",{className:"empty-title"},"Find Your Next Great Meal"),n.a.createElement("p",{className:"empty-subtitle"},"Enter a type of food and location to discover local restaurants")))}}var p=h;t(53);class m extends n.a.Component{constructor(e){super(e),this.sortByOptions={"Best Match":"best_match","Highest Rated":"rating","Most Reviewed":"review_count",Distance:"distance"},this.handleKeyPress=e=>{"Enter"===e.key&&this.handleSearch(e)},this.getUserLocation=()=>{navigator.geolocation?navigator.geolocation.getCurrentPosition(e=>{const{latitude:s,longitude:t}=e.coords;this.reverseGeocode(s,t)},e=>{console.error("Error getting user location:",e)}):console.error("Geolocation is not supported by this browser.")},this.reverseGeocode=(e,s)=>{const t="https://maps.googleapis.com/maps/api/geocode/json?latlng=".concat(e,",").concat(s,"&key=").concat("AIzaSyAFjagYUP76eJQmoDDGze9TtHboIBpY_0s");fetch(t).then(e=>e.json()).then(e=>{if(e.results&&e.results.length>0){const s=e.results[0].address_components.find(e=>e.types.includes("postal_code"));s&&this.setState({location:s.long_name})}}).catch(e=>console.error("Error reverse geocoding:",e))},this.state={term:"",location:"",sortBy:"best_match"},this.handleTermChange=this.handleTermChange.bind(this),this.handleLocationChange=this.handleLocationChange.bind(this),this.handleSearch=this.handleSearch.bind(this)}getSortByClass(e){return this.state.sortBy===e?"active":""}handleSortByChange(e){this.setState({sortBy:e},()=>{this.handleSearch()})}handleTermChange(e){this.setState({term:e.target.value})}handleLocationChange(e){this.setState({location:e.target.value})}handleSearch(e){e&&e.preventDefault(),this.state.term&&this.state.location&&this.props.searchYelp(this.state.term,this.state.location,this.state.sortBy)}renderSortByOptions(){return Object.keys(this.sortByOptions).map(e=>{let s=this.sortByOptions[e];return n.a.createElement("li",{key:s},n.a.createElement("button",{className:this.getSortByClass(s),onClick:this.handleSortByChange.bind(this,s),type:"button","aria-label":"Sort by ".concat(e),"aria-pressed":this.state.sortBy===s},e,this.state.sortBy===s&&n.a.createElement("span",{className:"active-indicator"}," \u2713")))})}render(){const e=this.state.term&&this.state.location;return n.a.createElement("div",{className:"SearchBar"},n.a.createElement("div",{className:"SearchBar-sort-options"},n.a.createElement("ul",null,this.renderSortByOptions())),n.a.createElement("div",{className:"SearchBar-fields"},n.a.createElement("input",{onChange:this.handleTermChange,onKeyPress:this.handleKeyPress,placeholder:"Search Businesses",value:this.state.term,"aria-label":"Search for type of business"}),n.a.createElement("input",{onChange:this.handleLocationChange,onKeyPress:this.handleKeyPress,placeholder:"Where?",value:this.state.location,"aria-label":"Location"}),n.a.createElement("button",{onClick:this.getUserLocation,"aria-label":"Use my current location"},"Use My Location")),n.a.createElement("div",{className:"SearchBar-submit"},n.a.createElement("button",{type:"button",className:"SearchBar-button ".concat(e?"":"disabled"),onClick:this.handleSearch,disabled:!e,"aria-label":"Search for businesses"},"Let's Go")))}}var u=m;var d={search:(e,s,t)=>fetch("https://morning-stream-08762.herokuapp.com/https://api.yelp.com/v3/businesses/search?term=".concat(e,"&location=").concat(s,"&sort_by=").concat(t,"&limit=48"),{headers:{Authorization:"Bearer ".concat("sP5eSul4f480F-oNSWCkmvnp2IlDFR-r2j9JJQHGRYFBI9S8im_raIsnlli7eBNxD8PMYoVwue8MQWW48Wlxde5U73ZXceiuKlfaXhjt2sMo7WcC_e-0EX7g-jdVYHYx")}}).then(e=>e.ok?e.json():(console.error("HTTP error! status: ".concat(e.status)),[])).then(e=>e.businesses?e.businesses.map(e=>{var s,t;return{id:e.id,imageSrc:e.image_url,name:e.name,address:e.location.address1,city:e.location.city,state:e.location.state,zipCode:e.location.zip_code,category:(null===(s=e.categories[0])||void 0===s?void 0:s.title)||"N/A",categories:(null===(t=e.categories)||void 0===t?void 0:t.slice(0,3).map(e=>e.title))||[],rating:e.rating,reviewCount:e.review_count,longitude:e.coordinates.longitude,latitude:e.coordinates.latitude,price:e.price||"N/A",phone:e.phone||"",url:e.url||"",distance:e.distance?Math.round(e.distance):null,isOpenNow:e.hours&&e.hours[0]?e.hours[0].is_open_now:null}}):[]).catch(e=>(console.error("Error fetching or processing Yelp data:",e),[]))};t(54);class g extends n.a.Component{constructor(e){super(e),this.state={businesses:[],searchPerformed:!1,isLoading:!1},this.searchYelp=this.searchYelp.bind(this)}searchYelp(e,s,t){this.setState({isLoading:!0}),d.search(e,s,t).then(e=>{this.setState({businesses:e,searchPerformed:!0,isLoading:!1})})}render(){return n.a.createElement("div",{className:"App"},n.a.createElement("h1",null,"ravenous"),n.a.createElement(u,{searchYelp:this.searchYelp}),n.a.createElement(p,{businesses:this.state.businesses,searchPerformed:this.state.searchPerformed,isLoading:this.state.isLoading}))}}var b=g;const v=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function E(e){navigator.serviceWorker.register(e).then(e=>{e.onupdatefound=()=>{const s=e.installing;s.onstatechange=()=>{"installed"===s.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(e=>{console.error("Error during service worker registration:",e)})}o.a.render(n.a.createElement(b,null),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("/ravenous",window.location).origin!==window.location.origin)return;window.addEventListener("load",()=>{const e="".concat("/ravenous","/service-worker.js");v?function(e){fetch(e).then(s=>{404===s.status||-1===s.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(e=>{e.unregister().then(()=>{window.location.reload()})}):E(e)}).catch(()=>{console.log("No internet connection found. App is running in offline mode.")})}(e):E(e)})}}()}},[[37,1,2]]]);
//# sourceMappingURL=main.0eedd041.chunk.js.map